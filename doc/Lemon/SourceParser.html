<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />

  <title>Class: Lemon::SourceParser</title>

  
    <link rel="SHORTCUT ICON" href="../assets/icon/class.png">
  

  <link type="text/css" rel="stylesheet" href="../assets/rdoc.css" media="screen" />
  <link type="text/css" rel="stylesheet" href="../assets/highlight/styles/github.css" title="GitHub" />

  <script type="text/javascript" charset="utf-8" src="../assets/jquery.js"></script>
  <script type="text/javascript" charset="utf-8" src="../assets/highlight/highlight.pack.js"></script>
  <script type="text/javascript" charset="utf-8" src="../assets/quicksearch.js"></script>
  <script type="text/javascript" charset="utf-8" src="../assets/main.js"></script>

  <script type="text/javascript">
    $(document).ready( function() {
      $('#documentation pre').wrapInner('<code></code>');
      hljs.tabReplace = '    ';
      hljs.initHighlightingOnLoad('ruby');

	    hookSourceViews();
	    hookDebuggingToggle();
	    hookQuickSearch();
	    highlightLocationTarget();

	    $('ul.link-list a').bind( "click", highlightClickTarget );
    });
  </script>
</head>
<body class="class">
<div id="main">

  <div class="head">
    <h1>
      
        <img src="../assets/icon/class.png" align="absmiddle">&nbsp;
      
      <a href="../index.html">&quot;Lemon&quot;</a>&nbsp;
      <a href="/">Lemon::SourceParser</a>
    </h1>
  </div>

  <div id="metadata">
    <div id="project-metadata">

      <div id="file-list-section" class="section">
        <h3 class="section-header">In Files</h3>
        <div class="section-body">
          <ul>
          
            <li class="file"><a href="../lib/lemon/model/source_parser_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
              class="thickbox" title="lib/lemon/model/source_parser.rb">lib/lemon/model/source_parser.rb</a></li>
          
          </ul>
        </div>
      </div>

      <!-- What about Git info, or Hg info? This seems almost silly, albeit kind of cool. -->
      <!-- TODO: generalize this for all SCMs -->

      
    </div>

    <div id="class-metadata">

      <!-- Parent Class -->
      
      <div id="parent-class-section" class="section">
        <h3 class="section-header">Parent</h3>
        <ul>
          
            
              <!-- why was this class="link" ? -->
              <li class="class"><a href="../Object.html">Object</a></li>
            
          
        </ul>
      </div>
      

      <!-- Namespace Contents -->
      
      <div id="namespace-list-section" class="section">
        <h3 class="section-header">Namespace</h3>
        <ul class="link-list">
          
          <li class="class"><a href="SourceParser/Scope.html">Lemon::SourceParser::Scope</a></li>
          
        </ul>
      </div>
      

      <!-- Method Quickref -->
      
      <div id="method-list-section" class="section">
        <h3 class="section-header">Methods</h3>
        <ul class="link-list">
          
            
            <li class="singleton">
              <a href="#method-c-new">::new</a>
            </li>
          
            
            <li class="singleton">
              <a href="#method-c-parse">::parse</a>
            </li>
          
            
            <li class="method">
              <a href="#method-i-args_for_node">#args_for_node</a>
            </li>
          
            
            <li class="method">
              <a href="#method-i-parse">#parse</a>
            </li>
          
            
            <li class="method">
              <a href="#method-i-process">#process</a>
            </li>
          
            
            <li class="method">
              <a href="#method-i-reset">#reset</a>
            </li>
          
            
            <li class="method">
              <a href="#method-i-sexp">#sexp</a>
            </li>
          
            
            <li class="method">
              <a href="#method-i-tokenize">#tokenize</a>
            </li>
          
        </ul>
      </div>
      

      <!-- Included Modules -->
      
    </div>

    <div id="project-metadata">
      
      
      <div id="fileindex-section" class="section project-section">
        <h3 class="section-header">Information</h3>
        <ul>
        
          <li class="file"><a href="../Version.html">Version</a></li>
        
          <li class="file"><a href="../Profile.html">Profile</a></li>
        
          <li class="file"><a href="../HISTORY_rdoc.html">HISTORY.rdoc</a></li>
        
          <li class="file"><a href="../Redfile.html">Redfile</a></li>
        
          <li class="file"><a href="../README_rdoc.html">README.rdoc</a></li>
        
          <li class="file"><a href="../NOTICE_rdoc.html">NOTICE.rdoc</a></li>
        
          <li class="file"><a href="../APACHE2_txt.html">APACHE2.txt</a></li>
        
        </ul>
      </div>
      

      <div id="classindex-section" class="section project-section">
        <h3 class="section-header">Class Index
          <span class="search-toggle"><img src="../assets/icon/find.png"
            height="16" width="16" alt="[+]"
            title="show/hide quicksearch" /></span></h3>
        <form action="#" method="get" accept-charset="utf-8" class="initially-hidden">
        <fieldset>
          <legend>Quicksearch</legend>
          <input type="text" name="quicksearch" value=""
            class="quicksearch-field" />
        </fieldset>
        </form>

        <!-- classpage.html : classes -->
        <ul class="link-list">
        
          <li class="module"><a href="../Lemon.html">Lemon</a></li>
        
          <li class="class"><a href="../Lemon/CLI.html">Lemon::CLI</a></li>
        
          <li class="module"><a href="../Lemon/CoverReports.html">Lemon::CoverReports</a></li>
        
          <li class="class"><a href="../Lemon/CoverReports/Abstract.html">Lemon::CoverReports::Abstract</a></li>
        
          <li class="class"><a href="../Lemon/CoverReports/Compact.html">Lemon::CoverReports::Compact</a></li>
        
          <li class="class"><a href="../Lemon/CoverReports/Outline.html">Lemon::CoverReports::Outline</a></li>
        
          <li class="class"><a href="../Lemon/CoverReports/Verbose.html">Lemon::CoverReports::Verbose</a></li>
        
          <li class="class"><a href="../Lemon/CoverReports/Yaml.html">Lemon::CoverReports::Yaml</a></li>
        
          <li class="class"><a href="../Lemon/CoverUnit.html">Lemon::CoverUnit</a></li>
        
          <li class="class"><a href="../Lemon/CoverageAnalyzer.html">Lemon::CoverageAnalyzer</a></li>
        
          <li class="class"><a href="../Lemon/ScaffoldGenerator.html">Lemon::ScaffoldGenerator</a></li>
        
          <li class="class"><a href="../Lemon/Snapshot.html">Lemon::Snapshot</a></li>
        
          <li class="class"><a href="../Lemon/Snapshot/Unit.html">Lemon::Snapshot::Unit</a></li>
        
          <li class="class"><a href="../Lemon/SourceParser.html">Lemon::SourceParser</a></li>
        
          <li class="class"><a href="../Lemon/SourceParser/Scope.html">Lemon::SourceParser::Scope</a></li>
        
          <li class="class"><a href="../Lemon/TestCase.html">Lemon::TestCase</a></li>
        
          <li class="class"><a href="../Lemon/TestCase/DSL.html">Lemon::TestCase::DSL</a></li>
        
          <li class="class"><a href="../Lemon/TestContext.html">Lemon::TestContext</a></li>
        
          <li class="module"><a href="../Lemon/TestReports.html">Lemon::TestReports</a></li>
        
          <li class="class"><a href="../Lemon/TestReports/Abstract.html">Lemon::TestReports::Abstract</a></li>
        
          <li class="class"><a href="../Lemon/TestReports/Dotprogress.html">Lemon::TestReports::Dotprogress</a></li>
        
          <li class="class"><a href="../Lemon/TestReports/Html.html">Lemon::TestReports::Html</a></li>
        
          <li class="class"><a href="../Lemon/TestReports/Outline.html">Lemon::TestReports::Outline</a></li>
        
          <li class="class"><a href="../Lemon/TestReports/Summary.html">Lemon::TestReports::Summary</a></li>
        
          <li class="class"><a href="../Lemon/TestReports/Tap.html">Lemon::TestReports::Tap</a></li>
        
          <li class="class"><a href="../Lemon/TestReports/Tapj.html">Lemon::TestReports::Tapj</a></li>
        
          <li class="class"><a href="../Lemon/TestReports/Tapy.html">Lemon::TestReports::Tapy</a></li>
        
          <li class="class"><a href="../Lemon/TestReports/Verbose.html">Lemon::TestReports::Verbose</a></li>
        
          <li class="class"><a href="../Lemon/TestRunner.html">Lemon::TestRunner</a></li>
        
          <li class="class"><a href="../Lemon/TestSuite.html">Lemon::TestSuite</a></li>
        
          <li class="class"><a href="../Lemon/TestSuite/DSL.html">Lemon::TestSuite::DSL</a></li>
        
          <li class="class"><a href="../Lemon/TestUnit.html">Lemon::TestUnit</a></li>
        
          <li class="class"><a href="../Object.html">Object</a></li>
        
          <li class="class"><a href="../Pending.html">Pending</a></li>
        
          <li class="class"><a href="../Untested.html">Untested</a></li>
        
        </ul>
        <div id="no-class-search-results" style="display: none;">No matching classes.</div>
      </div>
    </div>

    <div id="validator-badges">
      
      <div style="float: right; margin-right: 5px;">
        <a href="http://validator.w3.org/check/referer"><img src="../assets/icon/check.png" alt="[Validate]" height="16" width="16" /></a>
      </div>
      Generated with <a href="http://rubyworks.github.com/newfish">Newfish</a> 0.2.0
      <br/><br/>
    </div>
  </div>

  <div id="documentation">

    <div id="description">
      
        <h1>SourceParser</h1>
      

      
    </div>

    <!-- Constants -->
    

    <!-- Attributes -->
    
    <div id="attribute-method-details" class="method-section section">
      <h3 class="section-header">Attributes</h3>

      
      <div id="parser-attribute-method" class="method-detail">
        <a name="parser"></a>
        
        <a name="parser="></a>
        
        <div class="method-heading attribute-method-heading">
          <span class="method-name">parser</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
      <div id="scopes-attribute-method" class="method-detail">
        <a name="scopes"></a>
        
        <a name="scopes="></a>
        
        <div class="method-heading attribute-method-heading">
          <span class="method-name">scopes</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
      <div id="options-attribute-method" class="method-detail">
        <a name="options"></a>
        
        <a name="options="></a>
        
        <div class="method-heading attribute-method-heading">
          <span class="method-name">options</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
    </div>
    

    <!-- Methods -->
    
    <div id="public-class-method-details" class="method-section section">
      <h3 class="section-header">Public Class Methods</h3>

    
      <div id="new-method" class="method-detail ">
        <a name="method-c-new"></a>

        <div class="method-heading">
        
          <span class="method-name">new</span><span
            class="method-args">(options = {})</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>Each instance of <a href="SourceParser.html">SourceParser</a> accumulates
scopes with each parse, making it easy to parse an entire project in chunks
but more difficult to parse disparate files in one go. Create separate
instances for separate global scopes.</p>

<p>Returns an instance of TomDoc::SourceParser</p>
          

          
          <div class="method-source-code"
            id="new-source">
<pre>
<span class="ruby-comment"># File lib/lemon/model/source_parser.rb, line 25</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">options</span> = {})
  <span class="ruby-ivar">@options</span> = {}
  <span class="ruby-ivar">@parser</span>  = <span class="ruby-constant">RubyParser</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-ivar">@scopes</span>  = {}
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="parse-method" class="method-detail ">
        <a name="method-c-parse"></a>

        <div class="method-heading">
        
          <span class="method-name">parse</span><span
            class="method-args">(text)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>Converts Ruby code into a data structure.</p>

<p>text - A String of Ruby code.</p>

<p>Returns a Hash with each key a namespace and each value another</p>

<pre>Hash or a TomDoc::Scope.</pre>
          

          
          <div class="method-source-code"
            id="parse-source">
<pre>
<span class="ruby-comment"># File lib/lemon/model/source_parser.rb, line 13</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">text</span>)
  <span class="ruby-identifier">new</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">text</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
    </div>
  
    <div id="public-instance-method-details" class="method-section section">
      <h3 class="section-header">Public Instance Methods</h3>

    
      <div id="args_for_node-method" class="method-detail ">
        <a name="method-i-args_for_node"></a>

        <div class="method-heading">
        
          <span class="method-name">args_for_node</span><span
            class="method-args">(node)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>Given a method sexp, returns an array of the args.</p>
          

          
          <div class="method-source-code"
            id="args_for_node-source">
<pre>
<span class="ruby-comment"># File lib/lemon/model/source_parser.rb, line 145</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">args_for_node</span>(<span class="ruby-identifier">node</span>)
  <span class="ruby-constant">Array</span>(<span class="ruby-identifier">node</span>)[<span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-value">-1</span>].<span class="ruby-identifier">select</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">arg</span><span class="ruby-operator">|</span> <span class="ruby-identifier">arg</span>.<span class="ruby-identifier">is_a?</span> <span class="ruby-constant">Symbol</span> }
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="parse-method" class="method-detail ">
        <a name="method-i-parse"></a>

        <div class="method-heading">
        
          <span class="method-name">parse</span><span
            class="method-args">(text)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>Converts Ruby code into a data structure. Note that at the instance level
scopes accumulate, which makes it easy to parse multiple files in a single
project but harder to parse files that have no connection.</p>

<p>text - A String of Ruby code.</p>

<p>Examples</p>

<pre>@parser = TomDoc::SourceParser.new
files.each do |file|
  @parser.parse(File.read(file))
end
pp @parser.scopes</pre>

<p>Returns a Hash with each key a namespace and each value another</p>

<pre>Hash or a TomDoc::Scope.</pre>
          

          
          <div class="method-source-code"
            id="parse-source">
<pre>
<span class="ruby-comment"># File lib/lemon/model/source_parser.rb, line 54</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">parse</span>(<span class="ruby-identifier">text</span>)
  <span class="ruby-identifier">process</span>(<span class="ruby-identifier">tokenize</span>(<span class="ruby-identifier">sexp</span>(<span class="ruby-identifier">text</span>)))
  <span class="ruby-ivar">@scopes</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="process-method" class="method-detail ">
        <a name="method-i-process"></a>

        <div class="method-heading">
        
          <span class="method-name">process</span><span
            class="method-args">(ast, scope = nil)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>Converts a tokenized Array of classes, modules, and methods into Scopes and
Methods, adding them to the @scopes instance variable as it works.</p>

<p>ast   - Tokenized Array produced by calling `tokenize`. scope - An optional
<a href="SourceParser/Scope.html">Scope</a> object for nested classes or
modules.</p>

<p>Returns nothing.</p>
          

          
          <div class="method-source-code"
            id="process-source">
<pre>
<span class="ruby-comment"># File lib/lemon/model/source_parser.rb, line 76</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">process</span>(<span class="ruby-identifier">ast</span>, <span class="ruby-identifier">scope</span> = <span class="ruby-keyword">nil</span>)
  <span class="ruby-keyword">case</span> <span class="ruby-constant">Array</span>(<span class="ruby-identifier">ast</span>)[<span class="ruby-value">0</span>]
  <span class="ruby-keyword">when</span> <span class="ruby-value">:module</span>, <span class="ruby-value">:class</span>
    <span class="ruby-identifier">name</span> = <span class="ruby-identifier">ast</span>[<span class="ruby-value">1</span>]
    <span class="ruby-identifier">new_scope</span> = <span class="ruby-constant">Scope</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">ast</span>[<span class="ruby-value">2</span>])

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">scope</span>
      <span class="ruby-identifier">scope</span>.<span class="ruby-identifier">scopes</span>[<span class="ruby-identifier">name</span>] = <span class="ruby-identifier">new_scope</span>
    <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@scopes</span>[<span class="ruby-identifier">name</span>]
      <span class="ruby-identifier">new_scope</span> = <span class="ruby-ivar">@scopes</span>[<span class="ruby-identifier">name</span>]
    <span class="ruby-keyword">else</span>
      <span class="ruby-ivar">@scopes</span>[<span class="ruby-identifier">name</span>] = <span class="ruby-identifier">new_scope</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">process</span>(<span class="ruby-identifier">ast</span>[<span class="ruby-value">3</span>], <span class="ruby-identifier">new_scope</span>)
  <span class="ruby-keyword">when</span> <span class="ruby-value">:imethod</span>
    <span class="ruby-identifier">ast</span>.<span class="ruby-identifier">shift</span>
    <span class="ruby-identifier">scope</span>.<span class="ruby-identifier">instance_methods</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Method</span>.<span class="ruby-identifier">new</span>(*<span class="ruby-identifier">ast</span>)
  <span class="ruby-keyword">when</span> <span class="ruby-value">:cmethod</span>
    <span class="ruby-identifier">ast</span>.<span class="ruby-identifier">shift</span>
    <span class="ruby-identifier">scope</span>.<span class="ruby-identifier">class_methods</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Method</span>.<span class="ruby-identifier">new</span>(*<span class="ruby-identifier">ast</span>)
  <span class="ruby-keyword">when</span> <span class="ruby-constant">Array</span>
    <span class="ruby-identifier">ast</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">a</span><span class="ruby-operator">|</span> <span class="ruby-identifier">process</span>(<span class="ruby-identifier">a</span>, <span class="ruby-identifier">scope</span>) }
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="reset-method" class="method-detail ">
        <a name="method-i-reset"></a>

        <div class="method-heading">
        
          <span class="method-name">reset</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>Resets the state of the parser to a pristine one. Maintains options.</p>

<p>Returns nothing.</p>
          

          
          <div class="method-source-code"
            id="reset-source">
<pre>
<span class="ruby-comment"># File lib/lemon/model/source_parser.rb, line 34</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">reset</span>
  <span class="ruby-identifier">initialize</span>(<span class="ruby-ivar">@options</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="sexp-method" class="method-detail ">
        <a name="method-i-sexp"></a>

        <div class="method-heading">
        
          <span class="method-name">sexp</span><span
            class="method-args">(text)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>Converts Ruby sourcecode into an AST.</p>

<p>text - A String of Ruby source.</p>

<p>Returns a Sexp representing the AST.</p>
          

          
          <div class="method-source-code"
            id="sexp-source">
<pre>
<span class="ruby-comment"># File lib/lemon/model/source_parser.rb, line 64</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">sexp</span>(<span class="ruby-identifier">text</span>)
  <span class="ruby-ivar">@parser</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">text</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="tokenize-method" class="method-detail ">
        <a name="method-i-tokenize"></a>

        <div class="method-heading">
        
          <span class="method-name">tokenize</span><span
            class="method-args">(node)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>Converts a Ruby AST-style Sexp into an Array of more useful tokens.</p>

<p>node - A Ruby AST Sexp or Array</p>

<p>Examples</p>

<pre>[:module, :Math, &quot;&quot;,
  [:class, :Multiplexer, &quot;# Class Comment&quot;,
    [:cmethod,
      :multiplex, &quot;# Class Method Comment&quot;, [:text]],
    [:imethod,
      :multiplex, &quot;# Instance Method Comment&quot;, [:text, :count]]]]

# In others words:
# [ :type, :name, :comment, other ]</pre>

<p>Returns an Array in the above format.</p>
          

          
          <div class="method-source-code"
            id="tokenize-source">
<pre>
<span class="ruby-comment"># File lib/lemon/model/source_parser.rb, line 119</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">tokenize</span>(<span class="ruby-identifier">node</span>)
  <span class="ruby-keyword">case</span> <span class="ruby-constant">Array</span>(<span class="ruby-identifier">node</span>)[<span class="ruby-value">0</span>]
  <span class="ruby-keyword">when</span> <span class="ruby-value">:module</span>
    <span class="ruby-identifier">name</span> = <span class="ruby-identifier">node</span>[<span class="ruby-value">1</span>]
    [ <span class="ruby-value">:module</span>, <span class="ruby-identifier">name</span>, <span class="ruby-identifier">node</span>.<span class="ruby-identifier">comments</span>, <span class="ruby-identifier">tokenize</span>(<span class="ruby-identifier">node</span>[<span class="ruby-value">2</span>]) ]
  <span class="ruby-keyword">when</span> <span class="ruby-value">:class</span>
    <span class="ruby-identifier">name</span> = <span class="ruby-identifier">node</span>[<span class="ruby-value">1</span>]
    [ <span class="ruby-value">:class</span>, <span class="ruby-identifier">name</span>, <span class="ruby-identifier">node</span>.<span class="ruby-identifier">comments</span>, <span class="ruby-identifier">tokenize</span>(<span class="ruby-identifier">node</span>[<span class="ruby-value">3</span>]) ]
  <span class="ruby-keyword">when</span> <span class="ruby-value">:defn</span>
    <span class="ruby-identifier">name</span> = <span class="ruby-identifier">node</span>[<span class="ruby-value">1</span>]
    <span class="ruby-identifier">args</span> = <span class="ruby-identifier">args_for_node</span>(<span class="ruby-identifier">node</span>[<span class="ruby-value">2</span>])
    [ <span class="ruby-value">:imethod</span>, <span class="ruby-identifier">name</span>, <span class="ruby-identifier">node</span>.<span class="ruby-identifier">comments</span>, <span class="ruby-identifier">args</span> ]
  <span class="ruby-keyword">when</span> <span class="ruby-value">:defs</span>
    <span class="ruby-identifier">name</span> = <span class="ruby-identifier">node</span>[<span class="ruby-value">2</span>]
    <span class="ruby-identifier">args</span> = <span class="ruby-identifier">args_for_node</span>(<span class="ruby-identifier">node</span>[<span class="ruby-value">3</span>])
    [ <span class="ruby-value">:cmethod</span>, <span class="ruby-identifier">name</span>, <span class="ruby-identifier">node</span>.<span class="ruby-identifier">comments</span>, <span class="ruby-identifier">args</span> ]
  <span class="ruby-keyword">when</span> <span class="ruby-value">:block</span>
    <span class="ruby-identifier">tokenize</span>(<span class="ruby-identifier">node</span>[<span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-value">-1</span>])
  <span class="ruby-keyword">when</span> <span class="ruby-value">:scope</span>
    <span class="ruby-identifier">tokenize</span>(<span class="ruby-identifier">node</span>[<span class="ruby-value">1</span>])
  <span class="ruby-keyword">when</span> <span class="ruby-constant">Array</span>
    <span class="ruby-identifier">node</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">n</span><span class="ruby-operator">|</span> <span class="ruby-identifier">tokenize</span>(<span class="ruby-identifier">n</span>) }.<span class="ruby-identifier">compact</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
    </div>
  

  </div>


  <div id="rdoc-debugging-section-dump" class="debugging-section">
  
    <p>Disabled; run with --debug to generate this.</p>
  
  </div>

</main>
</body>
</html>

