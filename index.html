<html>
<head>
  <title>Lemon</title>
  <link href="assets/styles/reset.css" rel="stylesheet" type="text/css"/>
  <link href="assets/styles/site.css" rel="stylesheet" type="text/css"/>
  <link href="assets/images/lemon.jpg" rel="shortcut icon"/>
</head>
<body>

<div id="nav">
<div class="page">
  <!-- <a href="guide/doc.en/index.html">English Manual</a> &nbsp;&middot;&nbsp; -->
  <a href="rdoc/index.html">API Documents</a> &nbsp;&middot;&nbsp;
  <a href="http://wiki.github.com/proutils/lemon">Wiki-Wiki</a> &nbsp;&middot;&nbsp;
  <a href="http://googlegroups.com/group/proutils">Mailing List</a> &nbsp;&middot;&nbsp;
  <a href="http://github.com/proutils/lemon">Development</a>
</div>
</div>

<div id="header">
<div class="page">
  <img src="assets/images/cut-lemon.png" height="200px" align="right"/>
  <h1><img src="assets/images/title.png"/></h1>
</div>
</div>

<div id="main">
<div class="page">

  <h2>Pucker-Strength Unit Testing</h2>

  <p>Lemon is a unit testing framework which enforces highly formal
  case-to-class and unit-to-method test construction.
  This strict approach is arguably the most proper technique for unit
  testing because it helps promote good test coverage.</p>

  <h3>Writing Tests</h3>

  <p>Let's say we have a library that consists of the class <code>HelloWorld</code>
  with method <code>#to_s</code>:<p>

  <pre>
  class HelloWorld
    def to_s
      "Hello, World!"
    end
  end
  </pre>

  <p>We would write a Lemon test case along the following lines:</p>

  <pre>
  TestCase HelloWorld do
    Concern "String output works as expected."

    Unit :to_s => "returns a string" do
      HelloWorld.new.to_s.assert.is_a?(String)
    end

    Unit :to_s => "returns the world famous phrase" do
      HelloWorld.new.to_s.assert == "Hello, World!"
    end
  end
  </pre>

  <p>Obviously this an overly simplistic example, but it demonstrates well enough the overall design of Lemon
  tests. Notice that the <code>#TestCase</code> method references a class (this can also be a module) and the units each
  refer to a method of the class.</p>

  <p>Lemon uses the <a href="http://proutils.github.com/ae">Assertive Expressive</a>
  assertions framework. This is the same verstile framework used by <a href="http://proutils.github.com/qed">Q.E.D.</a>.
  By default Lemon test support the standard <code>#assert</code> and <code>#expect</code> assertion methods.
  If you wish to use subjunctive terms, either <code>#should</code> or <code>#must</code>, you can load these
  via a helper script (eg. <code>require 'ae/should'</code>).</p>

  <h3>Running Tests</h3>

  <p>The <tt>lemon</tt> command-line tool is used to run tests. Simply provide the name of the test files as arguments:</p>

  <pre>
  $ lemon test/cases/*.rb
  </pre>

  <p>By default the <tt>lemon</tt> command outputs the traditional dot-progress format. The <tt>--verbose</tt>
  or <tt>-v</tt> option provides additional information about each unit test and concern
  as they are executed.</p>

  <h3>Test Coverage</h3>

  <p>The <tt>lemon</tt> command can also be used to check test coverage. For this use the <tt>--coverage</tt>
  or <tt>-c</tt> option.</p>

  <pre>
  $ lemon -c test/cases/*.rb
  </pre>

  <p>To enusre only the code you are interested in is checked, you can either use <tt>-r</tt> to pre-require
  support libraries you wish not to include in the output. Or more conveniently, supply specific namespaces
  to include via the <tt>--namespace</tt> or <tt>-n</tt> option.

  <pre>
  $ lemon -c -n HelloWorld test/cases/*.rb
  </pre>

  <p>For more information on Lemon and how to use it please see the Lemon <a href="http://wiki.github.com/proutils/lemon">Wiki</a>.</p>

  <h2>Development</h2>

  <p>Lemon is a ProUtils project. Development is hosted on GitHub at:</p>

  <pre>
  <a href="http://github.com/proutils/lemon">http://github.com/proutils/lemon</a>
  </pre>

  <h3>License</h3>

  <p>Lemon is an open-source project licensed under the terms of <b>Lesser General Public License</b>.</p>
</div>
</div>

<div id="footer">
  <script type="text/javascript"><!--
  google_ad_client = "pub-1126154564663472";
  /* PROUTILS 09-10-14 728x90 */
  google_ad_slot = "0711173189";
  google_ad_width = 728;
  google_ad_height = 90;
  //-->
  </script>
  <script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
  </script>

  <br/><br/><br/>

  <img src="assets/images/lemons-are-good.jpg" height="200px" align="top" style="margin: 0 30px 30px 0;"/>
  <a href="http://www.gnu.org/licenses/lgpl-3.0-standalone.html">
    <img src="assets/images/lgplv3-147x51.png" align="right" style="margin: 0 0 20px 20px;" />
  </a>

  <div class="copyright">
    <p><b>Lemon</b>, Copyright &copy; 2009 Thomas Sawyer</p>
  </div>
</dir>

</body>
</html>
